{
  "displayName": "vulnhunter-distributed-demo",
  "jobSpec": {
    "workerPoolSpecs": [
      {
        "machineSpec": {
          "machineType": "n1-standard-8",
          "acceleratorType": "NVIDIA_TESLA_T4",
          "acceleratorCount": 2
        },
        "replicaCount": 2,
        "containerSpec": {
          "imageUri": "gcr.io/deeplearning-platform-release/pytorch-gpu.1-13",
          "command": [
            "python3",
            "/app/distributed_training.py"
          ],
          "args": [
            "--config",
            "/app/training_config.json",
            "--world-size",
            "4"
          ],
          "env": [
            {
              "name": "NCCL_DEBUG",
              "value": "INFO"
            },
            {
              "name": "PYTHONUNBUFFERED",
              "value": "1"
            },
            {
              "name": "MASTER_PORT",
              "value": "12355"
            }
          ]
        }
      }
    ],
    "scheduling": {
      "timeout": "14400s",
      "restartJobOnWorkerRestart": true
    }
  }
}