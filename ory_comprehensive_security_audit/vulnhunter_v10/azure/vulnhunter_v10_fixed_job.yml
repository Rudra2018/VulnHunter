$schema: https://azuremlschemas.azureedge.net/latest/commandJob.schema.json
type: command

# Job metadata
display_name: "VulnHunter V10 Fixed Training"
description: "VulnHunter V10 training with fixed environment - built-in packages only"
experiment_name: "vulnhunter-v10-fixed"

# Code and environment - using working basic script
code: ../training
command: python vulnhunter_v10_basic.py

# Use existing available environment from the workspace
environment: azureml:AzureML-ACPT-pytorch-1.13-py38-cuda11.7-gpu@latest

# Compute configuration
compute: azureml:vulnhunter-16core

# Resource allocation
resources:
  instance_count: 1

# Environment variables for 16-core optimization
environment_variables:
  OMP_NUM_THREADS: "16"
  MKL_NUM_THREADS: "16"
  VULNHUNTER_CPU_CORES: "16"
  VULNHUNTER_MEMORY_GB: "128"
  VULNHUNTER_DATASET_SUBSET: "5000000"

# Job tags
tags:
  version: "10.0.0-fixed"
  infrastructure: "16-core-Standard_E16s_v3"
  environment: "curated-sklearn"
  mathematical_foundations: "category-theory,tda,quantum-gnn"
  cores: "16"
  memory: "128GB"